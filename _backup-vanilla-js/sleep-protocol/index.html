<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ—Ç–æ–∫–æ–ª –∑–∞ –°—ä–Ω - –û–ø—Ç–∏–º–∏–∑–∏—Ä–∞–π —Å–≤–æ—è —Å—ä–Ω</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar" style="background: #6366f1; padding: 1rem 0; margin-bottom: 2rem;">
        <div class="container" style="display: flex; justify-content: space-between; align-items: center;">
            <a href="../dashboard/index.html" style="color: white; text-decoration: none; font-weight: 600;">‚Üê –ù–∞–∑–∞–¥ –∫—ä–º —Ç–∞–±–ª–æ—Ç–æ</a>
            <div style="display: flex; gap: 1rem; align-items: center;">
                <span id="user-email" style="color: white; font-size: 0.9rem;"></span>
                <button id="logout-btn" style="background: rgba(255,255,255,0.2); color: white; border: none; padding: 0.5rem 1rem; border-radius: 0.375rem; cursor: pointer; display: none;">–ò–∑—Ö–æ–¥</button>
                <a href="../auth/login.html" id="login-link" style="background: white; color: #6366f1; padding: 0.5rem 1rem; border-radius: 0.375rem; text-decoration: none; font-weight: 600;">–í—Ö–æ–¥</a>
            </div>
        </div>
    </nav>

    <div class="container">
        <header>
            <h1>–ü—Ä–æ—Ç–æ–∫–æ–ª –∑–∞ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞ –°—ä–Ω—è</h1>
            <p class="subtitle">–°—ä–∑–¥–∞–π —Å–≤–æ—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–∞ –≤–µ—á–µ—Ä–Ω–∞ —Ä—É—Ç–∏–Ω–∞ –∏ —Å–ª–µ–¥–∏ –Ω–∞–ø—Ä–µ–¥—ä–∫–∞ —Å–∏</p>
        </header>

        <div class="progress-indicator">
            <div class="step" data-step="1">
                <div class="step-number active">1</div>
                <div class="step-label">–û—Ü–µ–Ω–∫–∞</div>
            </div>
            <div class="step-connector"></div>
            <div class="step" data-step="2">
                <div class="step-number">2</div>
                <div class="step-label">–†—É—Ç–∏–Ω–∞</div>
            </div>
            <div class="step-connector"></div>
            <div class="step" data-step="3">
                <div class="step-number">3</div>
                <div class="step-label">–ß–µ–∫–ª–∏—Å—Ç</div>
            </div>
            <div class="step-connector"></div>
            <div class="step" data-step="4">
                <div class="step-number">4</div>
                <div class="step-label">–ü—Ä–æ—Å–ª–µ–¥—è–≤–∞–Ω–µ</div>
            </div>
        </div>

        <!-- Section 1: Sleep Assessment Form -->
        <section id="section-assessment" class="section active">
            <h2>–û—Ü–µ–Ω–∫–∞ –Ω–∞ –°—ä–Ω—è</h2>
            <p class="section-description">–ù–µ–∫–∞ —Ä–∞–∑–±–µ—Ä–µ–º —Ç–≤–æ–∏—Ç–µ –Ω–∞—Å—Ç–æ—è—â–∏ –º–æ–¥–µ–ª–∏ –Ω–∞ —Å—ä–Ω, –∑–∞ –¥–∞ —Å—ä–∑–¥–∞–¥–µ–º –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–∞ —Ä—É—Ç–∏–Ω–∞.</p>

            <form id="assessment-form">
                <div class="form-group">
                    <label for="sleep-hours">–ö–æ–ª–∫–æ —á–∞—Å–∞ —Å–ø–∏—à –Ω–∞ –Ω–æ—â?</label>
                    <input type="number" id="sleep-hours" name="sleep-hours" min="1" max="12" step="0.5" value="7" required>
                    <span class="input-suffix">—á–∞—Å–∞</span>
                </div>

                <div class="form-group">
                    <label for="bedtime">–ü–æ –∫–∞–∫–≤–æ –≤—Ä–µ–º–µ –æ–±–∏–∫–Ω–æ–≤–µ–Ω–æ –ª—è–≥–∞—à?</label>
                    <input type="time" id="bedtime" name="bedtime" value="22:30" required>
                </div>

                <div class="form-group">
                    <label for="fall-asleep-time">–ö–æ–ª–∫–æ –≤—Ä–µ–º–µ —Ç–∏ —Ç—Ä—è–±–≤–∞ –¥–∞ –∑–∞—Å–ø–∏—à?</label>
                    <select id="fall-asleep-time" name="fall-asleep-time" required>
                        <option value="under-15">–ü–æ–¥ 15 –º–∏–Ω—É—Ç–∏</option>
                        <option value="15-30" selected>15-30 –º–∏–Ω—É—Ç–∏</option>
                        <option value="30-60">30-60 –º–∏–Ω—É—Ç–∏</option>
                        <option value="over-60">–ù–∞–¥ 1 —á–∞—Å</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="wake-ups">–ö–æ–ª–∫–æ —á–µ—Å—Ç–æ —Å–µ —Å—ä–±—É–∂–¥–∞—à –ø—Ä–µ–∑ –Ω–æ—â—Ç–∞?</label>
                    <select id="wake-ups" name="wake-ups" required>
                        <option value="none">–ù–µ —Å–µ —Å—ä–±—É–∂–¥–∞–º</option>
                        <option value="1-2" selected>1-2 –ø—ä—Ç–∏</option>
                        <option value="3-plus">3 –∏–ª–∏ –ø–æ–≤–µ—á–µ –ø—ä—Ç–∏</option>
                    </select>
                </div>

                <div class="button-group">
                    <button type="submit" class="btn btn-primary">–ì–µ–Ω–µ—Ä–∏—Ä–∞–π –ú–æ—è—Ç–∞ –†—É—Ç–∏–Ω–∞</button>
                </div>
            </form>
        </section>

        <!-- Section 2: Personalized Evening Routine -->
        <section id="section-routine" class="section">
            <h2>–¢–≤–æ—è—Ç–∞ –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–∞ –í–µ—á–µ—Ä–Ω–∞ –†—É—Ç–∏–Ω–∞</h2>
            <p class="section-description">–°–ª–µ–¥–≤–∞–π —Ç–æ–∑–∏ 2-—á–∞—Å–æ–≤ –ø—Ä–æ—Ç–æ–∫–æ–ª –∑–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞ –∫–∞—á–µ—Å—Ç–≤–æ—Ç–æ –Ω–∞ —Å—ä–Ω—è.</p>

            <div class="routine-summary">
                <div class="summary-card">
                    <div class="summary-icon">üåô</div>
                    <div class="summary-content">
                        <div class="summary-label">–¶–µ–ª–µ–≤–æ –≤—Ä–µ–º–µ –∑–∞ —Å—ä–Ω</div>
                        <div class="summary-value" id="target-bedtime">22:30</div>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="summary-icon">‚è∞</div>
                    <div class="summary-content">
                        <div class="summary-label">–†—É—Ç–∏–Ω–∞—Ç–∞ –∑–∞–ø–æ—á–≤–∞</div>
                        <div class="summary-value" id="routine-start">20:30</div>
                    </div>
                </div>
            </div>

            <div id="routine-timeline" class="timeline">
                <!-- Timeline items will be generated by JavaScript -->
            </div>

            <div class="button-group">
                <button type="button" class="btn btn-secondary" onclick="app.goToSection(1)">–ù–∞–∑–∞–¥</button>
                <button type="button" class="btn btn-primary" onclick="app.goToSection(3)">–ö—ä–º –ß–µ–∫–ª–∏—Å—Ç</button>
            </div>
        </section>

        <!-- Section 3: Bedroom Optimization Checklist -->
        <section id="section-checklist" class="section">
            <h2>–ß–µ–∫–ª–∏—Å—Ç –∑–∞ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞ –°–ø–∞–ª–Ω—è—Ç–∞</h2>
            <p class="section-description">–ó–∞–≤—ä—Ä—à–∏ —Ç–µ–∑–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞ –Ω–∞–π-–¥–æ–±—Ä–∞ —Å—Ä–µ–¥–∞ –∑–∞ —Å—ä–Ω.</p>

            <div class="checklist-progress">
                <div class="progress-bar">
                    <div class="progress-fill" id="checklist-progress" style="width: 0%"></div>
                </div>
                <div class="progress-text">
                    <span id="checklist-completed">0</span> –æ—Ç <span id="checklist-total">10</span> –∑–∞–≤—ä—Ä—à–µ–Ω–∏
                </div>
            </div>

            <div id="checklist-items" class="checklist">
                <!-- Checklist items will be generated by JavaScript -->
            </div>

            <div class="button-group">
                <button type="button" class="btn btn-secondary" onclick="app.goToSection(2)">–ù–∞–∑–∞–¥</button>
                <button type="button" class="btn btn-primary" onclick="app.goToSection(4)">–ö—ä–º –ü—Ä–æ—Å–ª–µ–¥—è–≤–∞–Ω–µ</button>
            </div>
        </section>

        <!-- Section 4: Sleep Tracker -->
        <section id="section-tracker" class="section">
            <h2>–ü—Ä–æ—Å–ª–µ–¥—è–≤–∞–Ω–µ –Ω–∞ –°—ä–Ω—è</h2>
            <p class="section-description">–ó–∞–ø–∏—Å–≤–∞–π —Å—ä–Ω—è —Å–∏ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ, –∑–∞ –¥–∞ —Å–ª–µ–¥–∏—à –Ω–∞–ø—Ä–µ–¥—ä–∫–∞ —Å–∏.</p>

            <div class="tracker-container">
                <div class="tracker-form-container">
                    <h3>–ó–∞–ø–∏—à–∏ –î–Ω–µ—à–Ω–∏—è –°—ä–Ω</h3>
                    <form id="sleep-log-form">
                        <div class="form-group">
                            <label for="log-date">–î–∞—Ç–∞</label>
                            <input type="date" id="log-date" name="log-date" required>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="log-bedtime">–í—Ä–µ–º–µ –Ω–∞ –ª—è–≥–∞–Ω–µ</label>
                                <input type="time" id="log-bedtime" name="log-bedtime" required>
                            </div>

                            <div class="form-group">
                                <label for="log-waketime">–í—Ä–µ–º–µ –Ω–∞ —Å—ä–±—É–∂–¥–∞–Ω–µ</label>
                                <input type="time" id="log-waketime" name="log-waketime" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="log-quality">–ö–∞—á–µ—Å—Ç–≤–æ –Ω–∞ —Å—ä–Ω—è (1-10)</label>
                            <div class="quality-slider">
                                <input type="range" id="log-quality" name="log-quality" min="1" max="10" value="7">
                                <span class="quality-value" id="quality-display">7</span>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary full-width">–ó–∞–ø–∏—à–∏ –ó–∞–ø–∏—Å</button>
                    </form>

                    <div class="stats-container">
                        <h3>–¢–≤–æ—è—Ç–∞ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-label">–°—Ä–µ–¥–Ω–æ –∫–∞—á–µ—Å—Ç–≤–æ (7 –¥–Ω–∏)</div>
                                <div class="stat-value" id="avg-quality-7">-</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">–°—Ä–µ–¥–Ω–∏ —á–∞—Å–æ–≤–µ (7 –¥–Ω–∏)</div>
                                <div class="stat-value" id="avg-hours-7">-</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">–°—Ä–µ–¥–Ω–æ –∫–∞—á–µ—Å—Ç–≤–æ (30 –¥–Ω–∏)</div>
                                <div class="stat-value" id="avg-quality-30">-</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">–°—Ä–µ–¥–Ω–∏ —á–∞—Å–æ–≤–µ (30 –¥–Ω–∏)</div>
                                <div class="stat-value" id="avg-hours-30">-</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tracker-chart-container">
                    <h3>–¢—Ä–µ–Ω–¥ –Ω–∞ –ö–∞—á–µ—Å—Ç–≤–æ—Ç–æ –Ω–∞ –°—ä–Ω—è</h3>
                    <div class="chart-wrapper">
                        <canvas id="sleep-chart"></canvas>
                    </div>

                    <h3>–ü–æ—Å–ª–µ–¥–Ω–∏ –ó–∞–ø–∏—Å–∏</h3>
                    <div id="sleep-logs-list" class="logs-list">
                        <p class="empty-state">–í—Å–µ –æ—â–µ –Ω—è–º–∞ –∑–∞–ø–∏—Å–∏. –ó–∞–ø–æ—á–Ω–∏ –¥–∞ –∑–∞–ø–∏—Å–≤–∞—à, –∑–∞ –¥–∞ –≤–∏–¥–∏—à –∏—Å—Ç–æ—Ä–∏—è—Ç–∞ —Å–∏!</p>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button type="button" class="btn btn-secondary" onclick="app.goToSection(3)">–ù–∞–∑–∞–¥ –∫—ä–º –ß–µ–∫–ª–∏—Å—Ç</button>
            </div>
        </section>
    </div>

    <script src="../shared/js/supabase-client.js"></script>
    <script src="../shared/js/analytics.js"></script>
    <script src="app.js"></script>
</body>
</html>
